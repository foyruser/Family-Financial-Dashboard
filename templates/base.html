<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- put this inside <head> -->
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#4f46e5"><!-- matches your brand color -->
<link rel="apple-touch-icon" href="/static/icon-192.png"><!-- optional PWA-ish icon -->

  <title>{% block title %}Finance Tracker{% endblock %}</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { primary: { DEFAULT: '#4f46e5' } } } }
    }
  </script>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
  {% block head_extra %}{% endblock %}
</head>

<body class="min-h-screen bg-gray-100 flex flex-col">

  <!-- NAVBAR -->
  <nav class="bg-white shadow z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16 items-center">
        <div class="flex items-center space-x-8">
          <a href="{{ url_for('home') }}" class="text-lg font-extrabold text-indigo-600">ðŸ’° Dream Bee Network</a>
          {% if g.user_id %}
            <a href="{{ url_for('dashboard') }}" class="text-gray-600 hover:text-indigo-600 text-sm font-medium {% if request.endpoint == 'home' %}text-indigo-600 font-semibold{% endif %}">Dashboard</a>
            <a href="{{ url_for('expenses') }}" class="text-gray-600 hover:text-indigo-600 text-sm font-medium {% if request.endpoint == 'expenses' %}text-indigo-600 font-semibold{% endif %}">Expenses</a>
            <a href="{{ url_for('assets') }}" class="text-gray-600 hover:text-indigo-600 text-sm font-medium {% if request.endpoint == 'assets' %}text-indigo-600 font-semibold{% endif %}">Assets</a>
            <a href="{{ url_for('group_management') }}" class="text-gray-600 hover:text-indigo-600 text-sm font-medium {% if request.endpoint == 'group_management' %}text-indigo-600 font-semibold{% endif %}">Group</a>
          {% endif %}
        </div>

        <div class="flex items-center space-x-4">
          {% if g.user_id %}
            <span class="text-sm text-gray-500 hidden md:inline">
              Hello, <strong class="text-gray-700">{{ g.username or g.user_name or "User" }}</strong>
            </span>
            <a href="{{ url_for('profile') }}" class="text-gray-500 hover:text-indigo-600 text-sm">Profile</a>
            <a href="{{ url_for('logout') }}" class="text-gray-500 hover:text-red-600 text-sm">Logout</a>
          {% else %}
            <a href="{{ url_for('login') }}" class="text-gray-600 hover:text-indigo-600 text-sm font-medium">Login</a>
            <a href="{{ url_for('register') }}" class="ml-4 px-3 py-1 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700">Register</a>
          {% endif %}
        </div>
      </div>
    </div>
  </nav>

  <!-- FLASH MESSAGES -->
  <div class="max-w-4xl mx-auto mt-4 px-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="space-y-2">
          {% for category, message in messages %}
            <div class="p-3 text-sm rounded-lg border
                 {% if category == 'success' %}bg-green-100 text-green-700 border-green-300
                 {% elif category == 'error' %}bg-red-100 text-red-700 border-red-300
                 {% elif category == 'warning' %}bg-amber-100 text-amber-700 border-amber-300
                 {% else %}bg-gray-100 text-gray-700 border-gray-300{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  </div>

  <!-- PAGE CONTENT -->
  <main class="flex-grow container mx-auto p-6">
    {% block header_title %}{% endblock %}
    {% block header_subtitle %}{% endblock %}
    {% block content %}{% endblock %}
  </main>

  <!-- FOOTER -->
  <footer class="bg-white shadow-inner text-center py-4 mt-auto text-sm text-gray-500">
    &copy; {{ current_year or 2025 }} Dream Bee Network â€¢ Secure Family Finance Manager
  </footer>

  {% block scripts %}
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>lucide.createIcons();</script>
  {% endblock %}
</body>
</html>
