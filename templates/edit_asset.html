{% extends "base.html" %}
{% block title %}Edit Asset{% endblock %}
{% block header_title %}Edit Asset{% endblock %}
{% block header_subtitle %}Update asset details and critical information.{% endblock %}

{% block content %}
<div class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl">
  {% set form_input_class = "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow" %}

  <form method="POST" class="space-y-6">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 mb-4">1. Core Asset Information</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Owner</label>
        <select name="owner_id" required class="{{ form_input_class }}">
          {% for owner in owners %}
          <option value="{{ owner.id }}" {% if owner.id == asset.owner_id %}selected{% endif %}>{{ owner.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Asset Type</label>
        <select name="type" required class="{{ form_input_class }}">
          {% for type in asset_types %}
          <option value="{{ type }}" {% if type == asset.type %}selected{% endif %}>{{ type }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Asset Name / Description</label>
        <input type="text" name="name" required class="{{ form_input_class }}" value="{{ asset.name }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Account/Policy Number</label>
        <input type="text" name="account_no" class="{{ form_input_class }}" value="{{ asset.account_no }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Current Value</label>
        <input type="number" step="0.01" name="value" required class="{{ form_input_class }}" value="{{ asset.value }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Currency</label>
        <select name="currency" required class="{{ form_input_class }}">
          {% for curr in currencies %}
          <option value="{{ curr }}" {% if curr == asset.currency %}selected{% endif %}>{{ curr }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
        <select name="country" required class="{{ form_input_class }}">
          {% for country in countries %}
          <option value="{{ country }}" {% if country == asset.country %}selected{% endif %}>{{ country }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 pt-4 mb-4">2. Critical Access & Policy Details</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Financial Institution</label>
        <input type="text" name="financial_institution" class="{{ form_input_class }}" value="{{ asset.financial_institution }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Policy/Plan Type</label>
        <input type="text" name="policy_or_plan_type" class="{{ form_input_class }}" value="{{ asset.policy_or_plan_type }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Beneficiary Name</label>
        <input type="text" name="beneficiary_name" class="{{ form_input_class }}" value="{{ asset.beneficiary_name }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Institution Contact Phone</label>
        <input type="tel" name="contact_phone" class="{{ form_input_class }}" value="{{ asset.contact_phone }}">
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Official Document Location</label>
        <input type="text" name="document_location" class="{{ form_input_class }}" value="{{ asset.document_location }}">
      </div>
    </div>

    <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 pt-4 mb-4">3. Instructions and Notes</h2>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Future Instructions / Investment Strategy</label>
      <textarea name="investment_strategy" rows="3" class="{{ form_input_class }}">{{ asset.investment_strategy }}</textarea>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">General Notes</label>
      <textarea name="notes" rows="3" class="{{ form_input_class }}">{{ asset.notes }}</textarea>
    </div>

    <div class="flex justify-between pt-4">
      <a href="{{ url_for('home') }}" class="px-6 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300">Cancel</a>
      <button type="submit" class="px-8 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700">Save Changes</button>
    </div>
  </form>
</div>
{% endblock %}
