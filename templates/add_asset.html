{% extends "base.html" %}
{% block title %}Add New Asset{% endblock %}
{% block header_title %}<h1 class="text-2xl font-bold mb-1">Record New Financial Asset</h1>{% endblock %}
{% block header_subtitle %}<p class="text-gray-500">Enter comprehensive details for full visibility.</p>{% endblock %}

{% block content %}
<div class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl">
  {% set form_input = "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base" %}
  <form method="POST" action="{{ url_for('add_asset') }}" class="space-y-6">
    {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}

    <h2 class="text-lg font-semibold text-gray-700 border-b pb-2">1. Core Asset Information</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Owner</label>
        <select name="owner_id" required class="{{ form_input }}">
          {% for owner in owners %}
          <option value="{{ owner.id }}">{{ owner.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Asset Type</label>
        <select name="type" required class="{{ form_input }}">
          {% for type in asset_types %}
          <option value="{{ type }}">{{ type }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Asset Name / Description</label>
        <input type="text" name="name" required class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Account/Policy Number (Last 4 Recommended)</label>
        <input type="text" name="account_no" class="{{ form_input }}" autocomplete="off">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Current Value</label>
        <input type="number" step="0.01" inputmode="decimal" name="value" required class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Currency</label>
        <select name="currency" required class="{{ form_input }}">
          {% for curr in currencies %}
          <option value="{{ curr }}" {% if curr == 'USD' %}selected{% endif %}>{{ curr }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
        <select name="country" required class="{{ form_input }}">
          {% for c in countries %}
          <option value="{{ c }}">{{ c }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <h2 class="text-lg font-semibold text-gray-700 border-b pb-2 pt-2">2. Critical Access & Policy Details</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Financial Institution</label>
        <input type="text" name="financial_institution" class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Policy/Plan Type</label>
        <input type="text" name="policy_or_plan_type" class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Beneficiary Name</label>
        <input type="text" name="beneficiary_name" class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Institution Contact Phone</label>
        <input type="tel" name="contact_phone" class="{{ form_input }}">
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Official Document Location</label>
        <input type="text" name="document_location" class="{{ form_input }}">
      </div>
    </div>

    <h2 class="text-lg font-semibold text-gray-700 border-b pb-2 pt-2">3. Instructions and Notes</h2>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Future Instructions / Investment Strategy</label>
      <textarea name="investment_strategy" rows="3" class="{{ form_input }}"></textarea>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">General Notes</label>
      <textarea name="notes" rows="3" class="{{ form_input }}"></textarea>
    </div>

    <div class="sticky bottom-0 -mx-6 -mb-6 sm:static sm:m-0 bg-white/90 backdrop-blur border-t p-3 sm:p-0">
      <div class="flex justify-between">
        <a href="{{ url_for('assets') }}" class="px-5 py-3 rounded-lg bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300">Cancel</a>
        <button type="submit" class="px-6 py-3 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700">Save Asset Details</button>
      </div>
    </div>
  </form>
</div>
{% endblock %}
