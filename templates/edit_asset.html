{% extends "base.html" %}
{% block title %}Edit Asset{% endblock %}
{% block header_title %}<h1 class="text-2xl font-bold mb-1">Edit Asset</h1>{% endblock %}
{% block header_subtitle %}<p class="text-gray-500">Update details for this asset.</p>{% endblock %}

{% block content %}
<div class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl">
  {% set form_input = "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base" %}
  <form method="POST" class="space-y-6">
    {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Owner</label>
        <select name="owner_id" required class="{{ form_input }}">
          {% for owner in owners %}
          <option value="{{ owner.id }}" {% if owner.id == asset.owner_id %}selected{% endif %}>{{ owner.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Asset Type</label>
        <select name="type" required class="{{ form_input }}">
          {% for type in asset_types %}
          <option value="{{ type }}" {% if type == asset.type %}selected{% endif %}>{{ type }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Asset Name</label>
        <input type="text" name="name" value="{{ asset.name }}" required class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Account/Policy Number</label>
        <input type="text" name="account_no" value="{{ asset.account_no }}" class="{{ form_input }}" autocomplete="off">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Current Value</label>
        <input type="number" step="0.01" inputmode="decimal" name="value" value="{{ asset.current_value or asset.value }}" class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Currency</label>
        <select name="currency" class="{{ form_input }}">
          {% for curr in currencies %}
          <option value="{{ curr }}" {% if curr == asset.currency %}selected{% endif %}>{{ curr }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
        <select name="country" class="{{ form_input }}">
          {% for c in countries %}
          <option value="{{ c }}" {% if c == asset.country %}selected{% endif %}>{{ c }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <h2 class="text-lg font-semibold text-gray-700 border-b pb-2 pt-2">Critical & Policy</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Financial Institution</label>
        <input type="text" name="financial_institution" value="{{ asset.financial_institution }}" class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Policy/Plan Type</label>
        <input type="text" name="policy_or_plan_type" value="{{ asset.policy_or_plan_type }}" class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Beneficiary Name</label>
        <input type="text" name="beneficiary_name" value="{{ asset.beneficiary_name }}" class="{{ form_input }}">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Institution Contact Phone</label>
        <input type="tel" name="contact_phone" value="{{ asset.contact_phone }}" class="{{ form_input }}">
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Official Document Location</label>
        <input type="text" name="document_location" value="{{ asset.document_location }}" class="{{ form_input }}">
      </div>
    </div>

    <h2 class="text-lg font-semibold text-gray-700 border-b pb-2 pt-2">Instructions & Notes</h2>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Investment Strategy</label>
      <textarea name="investment_strategy" rows="3" class="{{ form_input }}">{{ asset.investment_strategy }}</textarea>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
      <textarea name="notes" rows="3" class="{{ form_input }}">{{ asset.notes }}</textarea>
    </div>

    <div class="sticky bottom-0 -mx-6 -mb-6 sm:static sm:m-0 bg-white/90 backdrop-blur border-t p-3 sm:p-0">
      <div class="flex justify-between">
        <a href="{{ url_for('assets') }}" class="px-5 py-3 rounded-lg bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300">Cancel</a>
        <button type="submit" class="px-6 py-3 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700">Save Changes</button>
      </div>
    </div>
  </form>
</div>
{% endblock %}
