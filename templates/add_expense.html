{% extends "base.html" %}
{% block title %}Record New Expense{% endblock %}
{% block header_title %}<h1 class="text-2xl font-bold mb-1">Record New Expense</h1>{% endblock %}
{% block header_subtitle %}<p class="text-gray-500">Log a new family transaction or bill.</p>{% endblock %}

{% block content %}
<div class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl max-w-lg mx-auto">
  {% set form_input = "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-base" %}
  <form method="POST" class="space-y-6">
    {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
      <input type="text" name="description" required class="{{ form_input }}" placeholder="e.g., Grocery trip at Whole Foods" autocomplete="on">
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Amount</label>
      <input type="number" step="0.01" inputmode="decimal" name="amount" required class="{{ form_input }}" placeholder="e.g., 55.75">
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
      <select name="category" required class="{{ form_input }}">
        <option value="" disabled selected>Select Category</option>
        {% for cat in categories %}
        <option value="{{ cat }}">{{ cat }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Currency</label>
      <select name="currency" required class="{{ form_input }}">
        <option value="" disabled selected>Select Currency</option>
        {% for cur in currencies %}
        <option value="{{ cur }}">{{ cur }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
      <input type="date" name="expense_date" required class="{{ form_input }}">
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Notes (Optional)</label>
      <textarea name="notes" rows="3" class="{{ form_input }}" placeholder="Details about the transaction, who paid, etc."></textarea>
    </div>

    <div class="sticky bottom-0 -mx-6 -mb-6 sm:static sm:m-0 bg-white/90 backdrop-blur border-t p-3 sm:p-0">
      <div class="flex justify-between">
        <a href="{{ url_for('expenses') }}" class="px-5 py-3 rounded-lg bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300">‚Üê Back to Expenses</a>
        <button type="submit" class="px-6 py-3 rounded-lg bg-red-600 text-white font-bold hover:bg-red-700">Add Expense</button>
      </div>
    </div>
  </form>
</div>
{% endblock %}
